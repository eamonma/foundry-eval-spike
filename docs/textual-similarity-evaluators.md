---
title: Textual Similarity Evaluators for Generative AI
titleSuffix: Microsoft Foundry
description: Learn about textual similarity evaluators for generative AI, including semantic similarity, F1 score, BLEU, GLEU, ROUGE, and METEOR metrics.
monikerRange: 'foundry'
ai-usage: ai-assisted
author: lgayhardt
ms.author: lagayhar
ms.reviewer: changliu2
ms.date: 11/18/2025
ms.service: azure-ai-foundry
ms.topic: reference
ms.custom:
  - build-aifnd
  - build-2025
---

# Textual similarity evaluators

[!INCLUDE [version-banner](../../includes/version-banner.md)]

[!INCLUDE [evaluation-preview](../../includes/evaluation-preview.md)]

It's important to compare how closely the textual response generated by your AI system matches the response you would expect. The expected response is called the *ground truth*.

Use a LLM-judge metric like [Similarity](#similarity) with a focus on the semantic similarity between the generated response and the ground truth. Or, use metrics from the field of natural language processing (NLP), including [F1 score](#f1-score), [BLEU](#bleu-score), [GLEU](#gleu-score), [ROUGE](#rouge-score), and [METEOR](#meteor-score) with a focus on the overlaps of tokens or n-grams between the two.

## Model configuration for AI-assisted evaluators

For reference in the following code snippets, the AI-assisted evaluators use a model configuration for the LLM-judge:



``` python 
endpoint = os.environ["AZURE_AI_PROJECT_ENDPOINT"]  # Sample : https://<account_name>.services.ai.azure.com/api/projects/<project_name>
model_deployment_name = os.environ.get("AZURE_AI_MODEL_DEPLOYMENT_NAME", "")  # Sample : gpt-4o-mini
dataset_name = os.environ.get("DATASET_NAME", "")
dataset_version = os.environ.get("DATASET_VERSION", "1")

```



## Similarity

Similarity measures the degrees of semantic similarity between the generated text and its ground truth with respect to a query. Compared to other text-similarity metrics that require ground truths, this metric focuses on semantics of a response, instead of simple overlap in tokens or n-grams. It also considers the broader context of a query.


## F1 score

F1 score measures the similarity by shared tokens between the generated text and the ground truth. It focuses on both precision and recall. The F1-score computes the ratio of the number of shared words between the model generation and the ground truth. The ratio is computed over the individual words in the generated response against those words in the ground truth answer. The number of shared words between the generation and the truth is the basis of the F1 score.

- *Precision* is the ratio of the number of shared words to the total number of words in the generation. 
- *Recall* is the ratio of the number of shared words to the total number of words in the ground truth.


## BLEU score

Bleu score computes the Bilingual Evaluation Understudy (BLEU) score commonly used in natural language processing and machine translation. It measures how closely the generated text matches the reference text.


## GLEU score

Gleu score computes the Google-BLEU (GLEU) score. It measures the similarity by shared n-grams between the generated text and ground truth. Similar to the BLEU score, it focuses on both precision and recall. It addresses the drawbacks of the BLEU score using a per-sentence reward objective.


## ROUGE score

Rouge score computes the Recall-Oriented Understudy for Gisting Evaluation (ROUGE) scores, a set of metrics used to evaluate automatic summarization and machine translation. It measures the overlap between generated text and reference summaries. ROUGE focuses on recall-oriented measures to assess how well the generated text covers the reference text. The ROUGE score is composed of precision, recall, and F1 score.


## METEOR score

Meteor score measures the similarity by shared n-grams between the generated text and the ground truth. Similar to the BLEU score, it focuses on precision and recall. It addresses limitations of other metrics like the BLEU score by considering synonyms, stemming, and paraphrasing for content alignment.



## Example using textual similarity evaluators

``` python

from azure.identity import DefaultAzureCredential
from azure.ai.projects import AIProjectClient
from azure.ai.projects.models import (
    DatasetVersion,
)
import json
import time
from pprint import pprint
from openai.types.evals.create_eval_jsonl_run_data_source_param import CreateEvalJSONLRunDataSourceParam, SourceFileID
from dotenv import load_dotenv
from datetime import datetime


load_dotenv()

endpoint = os.environ[
    "AZURE_AI_PROJECT_ENDPOINT"
]  # Sample : https://<account_name>.services.ai.azure.com/api/projects/<project_name>

connection_name = os.environ.get("CONNECTION_NAME", "")
model_endpoint = os.environ.get("MODEL_ENDPOINT", "")  # Sample: https://<account_name>.openai.azure.com.
model_api_key = os.environ.get("MODEL_API_KEY", "")
model_deployment_name = os.environ.get("AZURE_AI_MODEL_DEPLOYMENT_NAME", "")  # Sample : gpt-4o-mini
dataset_name = os.environ.get("DATASET_NAME", "")
dataset_version = os.environ.get("DATASET_VERSION", "1")

# Construct the paths to the data folder and data file used in this sample
script_dir = os.path.dirname(os.path.abspath(__file__))
data_folder = os.environ.get("DATA_FOLDER", os.path.join(script_dir, "data_folder"))
data_file = os.path.join(data_folder, "sample_data_evaluation.jsonl")

with DefaultAzureCredential() as credential:

    with AIProjectClient(endpoint=endpoint, credential=credential) as project_client:

        print("Upload a single file and create a new Dataset to reference the file.")
        dataset: DatasetVersion = project_client.datasets.upload_file(
            name=dataset_name or f"eval-data-{datetime.utcnow().strftime('%Y-%m-%d_%H%M%S_UTC')}",
            version=dataset_version,
            file_path=data_file,
        )
        pprint(dataset)

        print("Creating an OpenAI client from the AI Project client")

        client = project_client.get_openai_client()

        data_source_config = {
            "type": "custom",
            "item_schema": {
                "type": "object",
                "properties": {
                    "response": {"type": "string"},
                    "ground_truth": {"type": "string"},
                },
                "required": [],
            },
            "include_sample_schema": False,
        }

        testing_criteria = [
            {
                "type": "azure_ai_evaluator",
                "name": "Similarity",
                "evaluator_name": "builtin.similarity",
                "data_mapping": {
                    "response": "{{item.answer}}",
                    "ground_truth": "{{item.ground_truth}}"
                },
                "initialization_parameters": {
                    "deployment_name": f"{model_deployment_name}",
                    "threshold": 3
                }
            },
            {
                "type": "azure_ai_evaluator",
                "name": "ROUGEScore",
                "evaluator_name": "builtin.rouge_score",
                "data_mapping": {
                    "response": "{{item.answer}}",
                    "ground_truth": "{{item.ground_truth}}"
                },
                "initialization_parameters": {
                    "rouge_type": "rouge1",
                    "f1_score_threshold": 0.5,
                    "precision_threshold": 0.5,
                    "recall_threshold": 0.5
                }
            },
            {
                "type": "azure_ai_evaluator",
                "name": "METEORScore",
                "evaluator_name": "builtin.meteor_score",
                "data_mapping": {
                    "response": "{{item.answer}}",
                    "ground_truth": "{{item.ground_truth}}"
                },
                "initialization_parameters": {
                    "threshold": 0.5
                }
            },
            {
                "type": "azure_ai_evaluator",
                "name": "GLEUScore",
                "evaluator_name": "builtin.gleu_score",
                "data_mapping": {
                    "response": "{{item.answer}}",
                    "ground_truth": "{{item.ground_truth}}"
                },
                "initialization_parameters": {
                    "threshold": 0.5
                }
            },
            {
                "type": "azure_ai_evaluator",
                "name": "F1Score",
                "evaluator_name": "builtin.f1_score",
                "data_mapping": {
                    "response": "{{item.answer}}",
                    "ground_truth": "{{item.ground_truth}}"
                },
                "initialization_parameters": {
                    "threshold": 0.5
                }
            },
            {
                "type": "azure_ai_evaluator",
                "name": "BLEUScore",
                "evaluator_name": "builtin.bleu_score",
                "data_mapping": {
                    "response": "{{item.answer}}",
                    "ground_truth": "{{item.ground_truth}}"
                },
                "initialization_parameters": {
                    "threshold": 0.5
                }
            }
        ]

        print("Creating Eval Group")
        eval_object = client.evals.create(
            name="ai assisted evaluators test",
            data_source_config=data_source_config,
            testing_criteria=testing_criteria,
        )
        print(f"Eval Group created")

        print("Get Eval Group by Id")
        eval_object_response = client.evals.retrieve(eval_object.id)
        print("Eval Run Response:")
        pprint(eval_object_response)

        print("Creating Eval Run")
        eval_run_object = client.evals.runs.create(
            eval_id=eval_object.id,
            name="dataset",
            metadata={"team": "eval-exp", "scenario": "notifications-v1"},
            data_source=CreateEvalJSONLRunDataSourceParam(
                source=SourceFileID(id=dataset.id or "", type="file_id"), type="jsonl"
            ),
        )
        print(f"Eval Run created")
        pprint(eval_run_object)

        print("Get Eval Run by Id")
        eval_run_response = client.evals.runs.retrieve(run_id=eval_run_object.id, eval_id=eval_object.id)
        print("Eval Run Response:")
        pprint(eval_run_response)

        while True:
            run = client.evals.runs.retrieve(run_id=eval_run_response.id, eval_id=eval_object.id)
            if run.status == "completed" or run.status == "failed":
                output_items = list(client.evals.runs.output_items.list(run_id=run.id, eval_id=eval_object.id))
                pprint(output_items)
                print(f"Eval Run Report URL: {run.report_url}")
                
                break
            time.sleep(5)
            print("Waiting for eval run to complete...")

```


## Related content



- [Complete working sample](https://github.com/Azure/azure-sdk-for-python/blob/main/sdk/ai/azure-ai-projects/samples/evaluations/sample_evaluations_ai_assisted.py)
- [How to run agent evaluation](../../how-to/develop/agent-evaluate-sdk.md)
- [How to run cloud evaluation](../../how-to/develop/cloud-evaluation.md)

